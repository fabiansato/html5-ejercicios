
<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Pintando con javascript</title>
</head>
  <body>
    <canvas width="500" height="500" id="canvas"></canvas>
  <input type="color" id="color" oninput="defcolor(this.value);">
   <input type="range" id="grosor" oninput="defgrosor(this.value);" min="1" max="5"> 
    
    <script type="text/javascript">
var canvas = document.getElementById("canvas");
var lienzo = canvas.getContext("2d");
var cordenadaz = canvas.getBoundingClientRect();

var x = 0, y = 0, dibujando = false, color = "black", grosor = 2;

function defcolor(c){
    color = c;
}

function defgrosor(g){
    grosor = g;
}

canvas.addEventListener("mousedown", function(e){
    x = e.clientX - cordenadas.left;
    y = e.clientY - cordenadas.top;
    dibujando = true;
});

canvas.addEventListener("mousemove", function(e){
    if(dibujando === true){
        dibujar(x, y, e.clientX - cordenadas.left, e-clientY - cordenadas.top);
        x = e.clientX - cordenadas.left;
        y = e.clientY - cordenadas.top;
    }
});

canvas.addEventListener("mouseup", function(e){
    if(dibujando === true){
        dibujar(x,y, e.clientX - cordenadas.left, e.clientY - cordenadas.top);
        x = 0;
        y = 0;
        dibujando = false;
    }
    {
        console.log(e);
    }

});

function dibujar(x1, y1, x2, y2){
    lienzo.beginPath();
    lienzo.strokeStyle = color;
    lienzo.lineWidth = grosor;
    lienzo.moveTo(x1, y1);
    lienzo.lineTo(x2,y2);
    lienzo.stroke();
    lienzo.closePath();
}


    </script>
</body>
</html>